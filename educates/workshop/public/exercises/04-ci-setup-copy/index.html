<!DOCTYPE html>
<html>

<head><script src="/workshop/content/livereload.js?mindelay=10&amp;v=2&amp;port=80&amp;path=workshop/content/livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="generator" content="Educates (hugo)">

<title>
  
  </title>

<link rel="stylesheet" href='/workshop/static/bootstrap/css/bootstrap.css'>
<link rel="stylesheet" href='/workshop/static/fontawesome/css/all.min.css'>

<link rel="stylesheet" href='/workshop/static/styles/educates.css'>
<link rel="stylesheet" href='/workshop/static/styles/educates-markdown.css'>
<link rel="stylesheet" href='/workshop/static/theme/workshop-instructions.css'>

<link rel="shortcut icon" href='/workshop/static/images/favicon.ico'>





</head>
















































































































































<body data-google-tracking-id=''
  data-clarity-tracking-id=''
  data-amplitude-tracking-id='' data-workshop-name='educates-cli--cicd-cf0336d'
  data-session-namespace='educates-cli-w16-s002' data-workshop-namespace='educates-cli-w16'
  data-training-portal='educates-cli' data-ingress-domain='192.168.50.243.nip.io'
  data-ingress-protocol='http' data-ingress-port-suffix=''
  data-prev-page='' data-current-page=''
  data-next-page='' data-page-format='markdown' data-code-fences='chroma'
  data-page-step='' data-pages-total='6'>

  




<div class="modal fade" id="table-of-contents" tabindex="-1" role="dialog" aria-labelledby="table-of-contents-title"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 id="table-of-contents-title">CICD fundamentals</h5>
                <button class="btn btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <ul class="menu">
                    <li class="category">
                        <ul class="modules">
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/exercises/00-workshop-overview">1: Workshop Overview</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/exercises/01-flow">2: Flow</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/exercises/02-repository">3: Repository</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/exercises/03-ci">4: CI - Tekton</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/exercises/04-ci-setup">5: CI - Setup</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/exercises/04-ci-setup%20copy">6: CI - Setup</a>
                            </li>
                            
                            
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" type="button" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="header page-navbar sticky-top bg-primary">
    <div class="row row-no-gutters">
        <div class="col-sm-12">
            <div class="btn-group btn-group-sm" role="group">
                <form action='/workshop/content/'>
                    <button class="btn btn-transparent" id="header-goto-home" type="submit" aria-label="home"><span
                            class="fas fa-home fa-inverse" aria-hidden="true"></span></button>
                </form>
            </div>
            <div class="btn-toolbar float-end" role="toolbar">
                <div class="btn-group btn-group-sm" role="group">
                    <form action="/workshop/content/">
                        <button class="btn btn-transparent" id="header-prev-page" type="submit" disabled=""  aria-label="Prev"><span
                                class="fas fa-arrow-left fa-inverse" aria-hidden="true"></span></button>
                    </form>
                    <form>
                        <button class="btn btn-transparent" id="header-goto-toc" type="button" aria-label="TOC"
                            data-bs-toggle="modal" data-bs-target="#table-of-contents"><span class="fas fa-list fa-inverse"
                                aria-hidden="true"></span></button>
                    </form>
                    <form action="/workshop/content/">
                        <button class="btn btn-transparent" id="header-next-page" type="submit" disabled=""  aria-label="Next"><span
                                class="fas fa-arrow-right fa-inverse" aria-hidden="true"></span></button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


  




<div class="container-fluid main-content">
  <div class="row">
    <div class="col-sm-12">
      <section class="page-content" id="main">
        
        
        
        
        
        <h1 class="title" id="title">: CI - Setup</h1>
        
        <div class="rendered-content">
          <p>Tekton is already installed on your Kubernetes cluster.</p>
<p>Along with some tasks, and a Pipeline.</p>
<p>To see the tasks installed run</p>
<pre tabindex="0"><code class="language-execute" data-lang="execute">kubectl get tasks
</code></pre><p>You should see</p>
<pre tabindex="0"><code>NAME        AGE
git-clone   24m
kaniko      24m
</code></pre><p>Git clone, clones a Git Repository, and Kanikp, build a container image, directly on your Kubernetes cluster.</p>
<p>To see the pipeline run</p>
<pre tabindex="0"><code class="language-execute" data-lang="execute">kubectl get pipeline
</code></pre><p>It shows</p>
<pre tabindex="0"><code>NAME               AGE
clone-build-push   26m
</code></pre><p>a single pipeline, with the name clone-build-push</p>
<p>To see the content of the pileline, open it in the editor</p>
<pre tabindex="0"><code class="language-editor:open-file" data-lang="editor:open-file">title: Open pipeline.yaml
file: ~/exercises/tekton/pipeline.yaml
</code></pre><p>The file should look like this</p>
<p>TODO: check if file has changed, when the course is finished.</p>
<pre tabindex="0"><code>apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: clone-build-push
spec:
  description: | 
    This pipeline clones a git repo, builds a Docker image with Kaniko and
    pushes it to a registry
  params:
  - name: repo-url
    type: string
  - name: image-reference
    type: string
  workspaces:
  - name: shared-data
  - name: git-credentials
    description: My git credentials
  - name: docker-credentials
  tasks:
  - name: fetch-source
    taskRef:
      name: git-clone
    workspaces:
    - name: output
      workspace: shared-data
    - name: basic-auth
      workspace: git-credentials
    params:
    - name: url
      value: $(params.repo-url)
  - name: build-push
    runAfter: [&#34;fetch-source&#34;]
    taskRef:
      name: kaniko
    workspaces:
    - name: source
      workspace: shared-data
    - name: dockerconfig
      workspace: docker-credentials
    params:
    - name: IMAGE
      value: $(params.image-reference)
</code></pre><p>TODO: Add text about the pipeline file.</p>
<pre tabindex="0"><code class="language-execute" data-lang="execute">kubectl create -f /home/eduk8s/exercises/tekton/pipelinerun.yaml
</code></pre>
        </div>
        
      </section>
    </div>
  </div>
</div>
</section>


  <script src='/workshop/static/scripts/educates-bundle.js'></script>
<script src='/workshop/static/theme/workshop-instructions.js'></script>


</body>

</html>
